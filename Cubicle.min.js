(function(n,t){var r={},i=function(n){return typeof n=="function"},f=function(t,i,u){for(var h,o,f=t.split("."),e=u===!0?n:r,s=0;s<f.length-1;s++)h=f[s],o=e[h],o||(o=e[h]={}),e=o;return e[f[f.length-1]]=i,i},e=function(n){for(var e,u,f=n.split("."),t=r,i=0;i<f.length;i++)if(e=f[i],u=t[e],t=u,!u)break;return t},u=function(){for(var o=arguments,s=o.length,r=0,u,h,t,r=0;r<s;r++)u=o[r],i(u)&&(h=function(){},t=u.apply(n,[e,f]),t&&(t.init&&i(t.init)?t.init():t.constructor.name=="Promise"&&t.then(function(n){n&&n.init&&i(n.init)&&n.init()})))};u(function(n,t){return t("messaging",{init:function(){this._list=[]},listen:function(n,t,i){this._list.push({channel:n,context:t,callback:i})},unlisten:function(n,t){for(var r,i=0,u=this._list.length;i<u;i++)if(r=this._list[i],r.channel===n&&r.context===t)return this._list.splice(i,1),!0;return!1},publish:function(n,t){for(var r,i=0,u=this._list.length;i<u;i++)r=this._list[i],r.channel===n&&r.callback.apply(r.context,[t])}})});n[t]=u})(this,"Cubicle")
