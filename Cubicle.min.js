(function(n,t){"use strict";var r={},i=function(n){return typeof n=="function"},f=function(t,i,u){for(var e=t.split("."),o=u===!0?n:r,h,s,f=0;f<e.length-1;f++)h=e[f],s=o[h],s||(s=o[h]={}),o=s;return o[e[e.length-1]]=i,i},e=function(n){for(var f=n.split("."),i=r,e,u,t=0;t<f.length;t++)if(e=f[t],u=i[e],i=u,!u)break;return i},u=function(){for(var o=arguments,s=o.length,r=0,u,t,h=function(n){n&&n.init&&i(n.init)&&n.init()},r=0;r<s;r++)u=o[r],i(u)&&(t=u.apply(n,[e,f]),t&&(t.init&&i(t.init)?t.init():t.constructor.name==="Promise"&&t.then(h)))};u(function(n,t){return t("messaging",{init:function(){this.list=[]},listen:function(n,t,i){this.list.push({channel:n,context:t,callback:i})},unlisten:function(n,t){for(var r,i=0,u=this.list.length;i<u;i++)if(r=this.list[i],r.channel===n&&r.context===t)return this.list.splice(i,1),!0;return!1},publish:function(n,t){for(var i,r=0,u=this.list.length;r<u;r++)i=this.list[r],i.channel===n&&i.callback.apply(i.context,[t])}})});n[t]=u})(this,"Cubicle")
